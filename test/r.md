1. ระบบยืนยันอีเมล (Email Verification)
วัตถุประสงค์: เพื่อให้แน่ใจว่าผู้ใช้ใช้ที่อยู่อีเมลที่ถูกต้อง

วิธีการ:

เมื่อสมัครสมาชิก ให้สร้าง verificationToken สำหรับผู้ใช้ใหม่
ส่งลิงก์ยืนยันอีเมล (ที่มี verificationToken) ไปยังที่อยู่อีเมลที่ลงทะเบียน
เพิ่ม API สำหรับยืนยันอีเมล (/users/verify-email) โดยตรวจสอบ verificationToken ที่ถูกส่งมา
เปลี่ยนสถานะ isActive เป็น true เมื่อผู้ใช้ยืนยันอีเมลสำเร็จ
2. ลืมรหัสผ่าน (Password Reset)
วัตถุประสงค์: ช่วยให้ผู้ใช้สามารถรีเซ็ตรหัสผ่านเมื่อจำไม่ได้

วิธีการ:

เพิ่ม API สำหรับการร้องขอการรีเซ็ตรหัสผ่าน (/users/forgot-password)
สร้าง resetPasswordToken และส่งอีเมลให้ผู้ใช้พร้อมลิงก์ที่มีโทเค็นนี้
เพิ่ม API สำหรับการตั้งค่ารหัสผ่านใหม่ (/users/reset-password)
ตรวจสอบ resetPasswordToken และอนุญาตให้ผู้ใช้ตั้งรหัสผ่านใหม่
รีเซ็ต resetPasswordToken หลังจากการตั้งค่ารหัสผ่านสำเร็จ
3. เปลี่ยนรหัสผ่าน (Change Password)
วัตถุประสงค์: ให้ผู้ใช้ที่ล็อกอินอยู่สามารถเปลี่ยนรหัสผ่านได้

วิธีการ:

เพิ่ม API /users/change-password
ตรวจสอบรหัสผ่านปัจจุบัน
หากถูกต้อง ให้เปลี่ยนรหัสผ่านใหม่
4. ระบบ Role-Based Access Control (RBAC)
วัตถุประสงค์: กำหนดสิทธิ์การเข้าถึง API ตามบทบาท (role) ของผู้ใช้

วิธีการ:

ใช้ Guards ของ NestJS เพื่อตรวจสอบบทบาทก่อนเข้าถึง API
ตัวอย่าง:
Admin สามารถจัดการข้อมูลทั้งหมด
User เข้าถึงเฉพาะข้อมูลของตนเอง
Moderator ตรวจสอบและอนุมัติคำขอของผู้ใช้ได้บางส่วน
5. บันทึกการเข้าสู่ระบบ (Login History)
วัตถุประสงค์: เพื่อให้ระบบสามารถแสดงข้อมูลการล็อกอินย้อนหลัง

วิธีการ:

สร้าง Model ใหม่ชื่อ LoginHistory:
prisma
Copy code
model LoginHistory {
  id        Int      @id @default(autoincrement())
  userId    Int
  user      User     @relation(fields: [userId], references: [id])
  ip        String   // IP Address
  createdAt DateTime @default(now())
}
บันทึกข้อมูลการล็อกอิน (เช่น IP, วันเวลา) ทุกครั้งที่ผู้ใช้ล็อกอิน
เพิ่ม API เพื่อให้ผู้ใช้ดูประวัติการล็อกอินของตนเอง
6. ระบบ Profile Management
วัตถุประสงค์: ให้ผู้ใช้สามารถแก้ไขข้อมูลโปรไฟล์ของตัวเองได้

วิธีการ:

เพิ่ม API /users/update-profile เพื่อให้ผู้ใช้แก้ไขชื่อ อีเมล (และรูปโปรไฟล์ถ้ามี)
ใช้การตรวจสอบสิทธิ์ (Authentication) เพื่อให้เฉพาะเจ้าของบัญชีสามารถแก้ไขข้อมูลของตนเองได้
7. ระบบล็อกอินด้วย OAuth (Social Login)
วัตถุประสงค์: ให้ผู้ใช้ล็อกอินผ่าน Google, Facebook หรือแพลตฟอร์มอื่น ๆ ได้

วิธีการ:

ใช้ Passport.js ร่วมกับ nestjs/passport และ @nestjs/jwt
เพิ่ม OAuth Strategies (เช่น Google, Facebook)
รองรับการเชื่อมต่อบัญชีผู้ใช้ที่มีอยู่กับบัญชี Social
